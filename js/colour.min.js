class ColourPicker{constructor(a=()=>{}){var q=this;var e=_=>document.createElement(_),m='appendChild',n='classList';q.a=a,q.window=e("div"),q.b=e("input"),q.c=e("div"),q.d=e("div"),q.g=e("div"),q.f=e("div");ColourPicker.d(q.window)`position:fixed``opacity:0``pointer-events:none`;q.window[n].add('colourpicker-window');q.b.type="text";q.b[n].add('colourpicker-input');q.b.addEventListener("change",e=>{q.colour=q.b.value},!1);ColourPicker.d(q.c)`position:relative``background-image: linear-gradient(0deg,black,transparent), linear-gradient(90deg,white,transparent)`;q.c[n].add('colourpicker-svslider');ColourPicker.e(q.c,(x,y)=>{var p=q.c.getBoundingClientRect();x=x-p.left,y=y-p.top;x>p.width?x=p.width:x<0?x=0:0;y>p.height?y=p.height:y<0?y=0:0;q.d.style.left=x+'px';q.d.style.top=y+'px';q.h[1]=x/p.width*100;q.h[2]=100-y/p.height*100;q.g.style.backgroundImage=q.k();q.b.value=q.l();q.a(q.b.value)});ColourPicker.d(q.d)`position:absolute` `pointer-events:none` `z-index:1`;q.d[n].add('colourpicker-svindicator');ColourPicker.d(q.g)`position:relative`;q.g[n].add('colourpicker-hueslider');ColourPicker.e(q.g,(x,y)=>{var p=q.g.getBoundingClientRect();y=y-p.top;y>p.height?y=p.height:y<0?y=0:0;q.f.style.top=y+'px';q.h[0]=y/p.height*360;q.c.style.backgroundColor=`hsl(${q.h[0]},100%,50%)`;q.b.value=q.l();q.a(q.b.value)});q.g.addEventListener("wheel",e=>{q.h[0]=(Math.round(e.deltaY/25)+q.h[0]+Math.ceil(Math.abs(e.deltaY)/360)*360)%360;q.c.style.backgroundColor=`hsl(${q.h[0]},100%,50%)`;q.f.style.top=(q.h[0]/3.6)+'%';q.b.value=q.l();q.a(q.b.value)},!1);ColourPicker.d(q.f)`position:absolute` `pointer-events:none` `z-index:1`;q.f[n].add('colourpicker-hueindicator');q.g[m](q.f);q.c[m](q.d);q.window[m](q.b);q.window[m](q.c);q.window[m](q.g);document.body[m](q.window)}trigger(src){var q=this;ColourPicker.d(q.window)`opacity:1` `pointer-events:all`;if(src){var p=src.getBoundingClientRect(),windowp=q.window.getBoundingClientRect();q.window.style.top=(p.bottom+windowp.height>window.innerHeight?(p.top-windowp.height<0?0:p.top-windowp.height):p.bottom)+'px';q.window.style.left=(p.left+windowp.width>window.innerWidth?(p.right-windowp.width<0?0:p.right-windowp.width):p.left)+'px'}var dismiss=e=>{if(!q.window.contains(e.target)&&e.target!==src){ColourPicker.d(q.window)`opacity:0` `pointer-events:none`;document.removeEventListener("click",dismiss,!1)}};document.addEventListener("click",dismiss,!1)}k(){var[s,l]=ColourPicker.c(this.h[1],this.h[2]);return `linear-gradient(hsl(0,${s}%,${l}%),hsl(60,${s}%,${l}%),hsl(120,${s}%,${l}%),hsl(180,${s}%,${l}%),hsl(240,${s}%,${l}%),hsl(300,${s}%,${l}%),hsl(0,${s}%,${l}%))`}l(){var[r,g,b]=ColourPicker.a(...this.h);return '#'+('0'+r.toString(16)).slice(-2)+('0'+g.toString(16)).slice(-2)+('0'+b.toString(16)).slice(-2)}set colour(c){var q=this;c=c.toUpperCase().replace(/[^0-9A-F]/g,'').slice(0,6);if(c.length===4)c=c.slice(0,3);if(c.length===3)c=c.split('').map(a=>a+a).join('');if(c.length===6){q.b.value='#'+c;q.h=ColourPicker.b(parseInt(c.slice(0,2),16),parseInt(c.slice(2,4),16),parseInt(c.slice(4,6),16));q.c.style.backgroundColor=`hsl(${q.h[0]},100%,50%)`;q.f.style.top=(q.h[0]/3.6)+'%';q.d.style.left=q.h[1]+'%';q.d.style.top=(100-q.h[2])+'%';q.g.style.backgroundImage=q.k();q.a(q.b.value)}else q.b.value=q.l()}get colour(){return this.b.value}darkness(){var[r,g,b]=ColourPicker.a(...this.h);return Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000)}static e(y,z){var x=['addEventListener','removeEventListener','preventDefault','changedTouches','mousemove','mouseup','touchmove','touchend'];y[x[0]]("mousedown",e=>{var move=e=>{z(e.clientX,e.clientY);e[x[2]]()},up=e=>{z(e.clientX,e.clientY);document[x[1]](x[4],move,!1);document[x[1]](x[5],up,!1);e[x[2]]()};document[x[0]](x[4],move,!1);document[x[0]](x[5],up,!1);e[x[2]]()},!1);y[x[0]]("touchstart",e=>{var move=e=>{z(e.touches[0].clientX,e.touches[0].clientY);e[x[2]]()},up=e=>{z(e[x[3]][0].clientX,e[x[3]][0].clientY);document[x[1]](x[6],move,{passive:!1});document[x[1]](x[7],up,{passive:!1});e[x[2]]()};document[x[0]](x[6],move,{passive:!1});document[x[0]](x[7],up,{passive:!1});e[x[2]]()},{passive:!1})}static d(y){function v([w]){y.style.setProperty(w.slice(0,w.indexOf(':')),w.slice(w.indexOf(':')+1));return v}return v}static c(s,v){s/=100,v/=100;var _l=(2-s)*v;_l=[Math.round((s*v)/(_l<=1?_l:2-_l)*100),Math.round(_l*50)];if(isNaN(_l[0]))_l[0]=0;return _l}static b(r,g,b){var z=Math.max(r,g,b),y=Math.min(r,g,b),d=z-y,h,s=(z===0?0:d/z),v=z/255;switch(z){case y:h=0;break;case r:h=(g-b)+d*(g<b?6:0);h/=6*d;break;case g:h=(b-r)+d*2;h/=6*d;break;case b:h=(r-g)+d*4;h/=6*d;break}return[Math.round(h*360),Math.round(s*100),Math.round(v*100)]}static a(h,s,v){var r,g,b,i,f,p,q,t;h/=360,s/=100,v/=100,i=Math.floor(h*6),f=h*6-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break}return[Math.round(r*255),Math.round(g*255),Math.round(b*255)]}}
